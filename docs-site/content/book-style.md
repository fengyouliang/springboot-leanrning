# 写作指南：把文档写成“书”

本仓库的模块文档目标不是“参考手册式罗列”，而是**像一本书一样可以顺读**：读者能从一个入口开始，沿着主线把机制与源码跑通；需要深入时，再用索引去定位细节章节。

---

## 1. 本仓库的书籍化原则

1. **主线先行**：每个模块都要有“主线时间线”章节，回答“这一套机制在容器/框架里按时间顺序怎么发生”。
2. **叙事优先，结构服务叙事**：不采用固定 7 段契约式骨架；“机制/源码/实验/排障”以插入段的形式出现。
3. **入口稳定**：尽量不移动文件路径；必要的合并/拆章使用“redirect 页面”保留旧入口。
4. **读者闭环**：重要章节要能落到可运行的 Lab/Test 或可观察的断点/日志，让读者能验证理解而不是“背概念”。

## 2. 推荐的章节写法（不强制，但强烈建议）

### 2.1 章首提示框（可选）

- `!!! summary`：本章最重要的 2–3 个结论（读者能复述）
- `!!! example`：建议先跑的实验入口（方法级/测试级优先）

### 2.2 叙事中的插入段（按需出现）

- `!!! note`：源码锚点（关键类/关键方法/关键分支）
- `!!! info`：Debugger Pack（Entrypoints / Watchpoints / Decisive Branch）
- `!!! warning`：坑点与边界（最常见误区 + 如何验证/规避）

> 关键点：提示框是“插入段”，不是固定并列模板；叙事主线应当可连续阅读。

## 3. 每个模块 README（目录页）应长什么样

`<module>/docs/README.md` 是读者的第一入口，建议满足三件事：

1. **第一屏告诉读者从哪开始读**（主线时间线 / 30 分钟快速闭环）
2. **给出顺读主线的目录**（按时间线）
3. **给出深挖索引与排障入口**（按机制域/症状）

## 4. 链接稳定与重排策略

- **优先保留路径**：只重写内容与目录组织，不随意移动文件。
- **需要合并/拆章时**：
  - 新章节承载内容（保持“顺读”更自然）
  - 旧章节改为 redirect 页面（保留标题 + 1–2 句说明 + 指向新章节链接）

## 5. 写作风格建议（让它更像书）

- 先给读者“为什么需要这一步”的上下文，再进入机制细节
- 用具体场景串起来（例如：一个请求如何从入口一路走到关键扩展点）
- 避免“术语堆叠式概述”；遇到概念时要落到一个可观察证据（源码/日志/断点/测试）

