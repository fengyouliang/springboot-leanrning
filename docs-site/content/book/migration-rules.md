# 迁移规则（合并/拆章/redirect/断链）
<!-- CHAPTER-CARD:START -->
!!! summary "章节学习卡片（五问闭环）"

    - 知识点：迁移规则（合并/拆章/redirect/断链）
    - 怎么使用：本页为索引/工具页：按页面提示找到入口（章节/Lab/断点地图），再回到主线章节顺读。
    - 原理：本页不讲机制原理，负责把“入口与路径”整理成可检索的导航。
    - 源码入口：N/A（本页为索引/工具页）
    - 推荐 Lab：N/A
<!-- CHAPTER-CARD:END -->


本页目标：在允许大规模重排与改名的前提下，让“书籍化迁移”仍然可控、可回滚、可验收。

---

## 小结与下一章

<!-- BOOKLIKE-V2:SUMMARY:START -->
- 一句话总结：迁移规则（合并/拆章/redirect/断链） —— 本页为索引/工具页：按页面提示找到入口（章节/Lab/断点地图），再回到主线章节顺读。
- 回到主线：本页不讲机制原理，负责把“入口与路径”整理成可检索的导航。
- 下一章：建议按模块目录/全书目录继续顺读。
<!-- BOOKLIKE-V2:SUMMARY:END -->

## 怎么用这页

<!-- BOOKLIKE-V2:INTRO:START -->
这一章围绕「迁移规则（合并/拆章/redirect/断链）」展开：先把边界说清楚，再沿主线推进到关键分支，最后用可运行入口把结论验证出来。

阅读建议：
- 先看章首的“章节学习卡片/本章要点”，建立预期；
- 建议先带着问题顺读一遍正文，再按证据链回到源码/断点验证。
<!-- BOOKLIKE-V2:INTRO:END -->

## 书籍化迁移的核心原则

1. **先稳定目录与阅读入口**：先让读者“顺读得下去”，再做物理迁移与章节重排。
2. **证据链不丢**：迁移后仍要能定位到可跑入口（Lab/Exercise/Solution）与可观察点（断点/关键分支）。
3. **少量关键入口可保留 redirect**：不是为了“永远兼容”，而是为了避免站内导航/搜索/历史链接瞬间失效。

---

## 什么时候应该“移动文件”

建议移动/合并/拆章的场景：

- 同一机制跨模块重复出现，且更适合放进书的叙事主线中
- 某章节天然是“跨模块桥接章节”（例如：AOP → Tx → Web 的承接）
- 模块目录结构已经成为阅读负担（读者先要理解目录才能开始读）

---

## 什么时候应该“保留 redirect（旧入口）”

建议保留 redirect 的场景：

- 模块 README/站点首页/书目录等关键入口已广泛引用
- 章节在历史版本/外部笔记中被大量引用
- 该章节本身承担“可跑入口”的聚合索引（迁移后容易让读者找不到实验入口）

redirect 页面建议至少保留：

- 1–2 句说明（发生了什么迁移）
- 指向新章节的链接
- （可选但推荐）保留一个可跑入口类名（避免“迁移后章节不再可运行”）

---

## 什么时候允许断链

允许断链的场景（低成本清理）：

- 章节属于“重复内容/临时笔记/历史草稿”
- 章节不再出现在书目录与模块 README 的主线入口中

即便允许断链，也建议：

- 在一次迁移批次里跑 `bash scripts/check-docs.sh` 与 `bash scripts/docs-site-build.sh`
